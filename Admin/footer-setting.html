<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Onyx Pharma | Admin Panel</title>
    <style>
        body { font-family: sans-serif; background: #f4f4f4; padding: 20px; }
        .admin-box { max-width: 500px; background: white; padding: 25px; border-radius: 8px; margin: auto; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        h2 { color: #f85606; text-align: center; }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; }
        input { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box; }
        button { width: 100%; padding: 12px; background: #f85606; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 16px; margin-top: 10px; }
        button:hover { background: #d44905; }
        #status { text-align: center; margin-top: 10px; color: green; font-weight: bold; }
    </style>
</head>
<body>

<div class="admin-box">
    <h2>Update Site Info</h2>
    <div class="form-group">
        <label>WhatsApp Number (e.g. 88017...)</label>
        <input type="text" id="wa_num" placeholder="8801700000000">
    </div>
    <div class="form-group">
        <label>Phone Display</label>
        <input type="text" id="phone_display" placeholder="+880 1700-000000">
    </div>
    <div class="form-group">
        <label>Address</label>
        <input type="text" id="address" placeholder="Road 12, Sector 07, Uttara">
    </div>
    <div class="form-group">
        <label>Email Address</label>
        <input type="email" id="email" placeholder="info@onyxpharma.com">
    </div>
    <button onclick="updateData()">Update Changes</button>
    <p id="status"></p>
</div>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getDatabase, ref, set, onValue } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

    const firebaseConfig = {
        apiKey: "AIzaSyD1mn9MR9hyZ36Ce1lnGyJYmL6AHopScTA",
        databaseURL: "https://social-media-5e6c8-default-rtdb.firebaseio.com",
        projectId: "social-media-5e6c8",
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    // Load Existing Data
    onValue(ref(db, 'siteSettings'), (snap) => {
        const data = snap.val();
        if(data) {
            document.getElementById('wa_num').value = data.whatsapp || "";
            document.getElementById('phone_display').value = data.phone || "";
            document.getElementById('address').value = data.address || "";
            document.getElementById('email').value = data.email || "";
        }
    });

    // Update Function
    window.updateData = function() {
        const settings = {
            whatsapp: document.getElementById('wa_num').value,
            phone: document.getElementById('phone_display').value,
            address: document.getElementById('address').value,
            email: document.getElementById('email').value
        };

        set(ref(db, 'siteSettings'), settings)
            .then(() => {
                document.getElementById('status').innerText = "Successfully Updated!";
                setTimeout(() => document.getElementById('status').innerText = "", 3000);
            })
            .catch(err => alert("Error: " + err));
    }
</script>
</body>
</html>